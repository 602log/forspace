<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="kr.co.forspace.mapper.BookingMapper">

	<resultMap type="kr.co.forspace.booking.BookingDTO" id="bookingMap">
		<id column="BO_NO" property="boNo"/>
		<result column="SC_NO" property="scNo"/>
		<result column="ME_EMAIL" property="meEmail"/>
		<result column="RO_NO" property="roNo"/>
		<result column="BO_TIME" property="boTime"/>
		<result column="BO_DATE" property="boDate"/>
	</resultMap>
	
	<select id="checkBook" resultType="kr.co.forspace.booking.BookingDTO" parameterType="kr.co.forspace.booking.BookingDTO">
	<![CDATA[
		SELECT BO_NO AS boNo, SC_NO AS scNo, ME_EMAIL AS meEmail, RO_NO AS roNo, BO_TIME AS boTime, BO_DATE AS boDate
		FROM BOOKING
		WHERE RO_NO = #{roNo} AND TO_CHAR(BO_DATE, 'yyyy/MM/dd') = #{boDateStr}
	]]>
	</select>
	
	<insert id="insertBook">
		<![CDATA[
		INSERT INTO BOOKING (BO_NO, SC_NO, ME_EMAIL, RO_NO, BO_TIME)
		VALUES(SEQ_BO.nextval, #{scNo}, #{meEmail}, #{roNo}, #{boTime})
		]]>
	</insert>


</mapper>